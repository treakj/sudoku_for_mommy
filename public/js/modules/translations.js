/**
 * Módulo de Traduções
 * Gerencia todos os textos do jogo em múltiplos idiomas
 */

export const translations = {
    en: {
        mainTitle: "Sudoku Game",
        subtitle: "Challenge your logic and have fun!",
        difficultyLabel: "Difficulty:",
        easy: "Easy",
        medium: "Medium",
        hard: "Hard",
        expert: "Expert",
        insane: "Insane",
        newGame: "New Game",
        reset: "Reset",
        hint: "Hint",
        showAnswer: "Answer",
        winTitle: "Congratulations!",
        winSubtitle: "You have completed the Sudoku!",
        playAgain: "Play Again",
        confirmTitle: "Show Answer?",
        confirmSubtitle: "This will fill the entire board and end the current game. Are you sure?",
        cancel: "Cancel",
        confirm: "Confirm",
        langToggle: "JP",
        howToPlay: "How to Play",
        keyboardControls: "Keyboard Controls",
        arrowKeys: "Arrow Keys: Navigate the board",
        numbers: "1-9: Insert numbers",
        backspace: "Backspace/Delete/0: Clear numbers",
        hintKey: "H: Use hint",
        languageKey: "L: Toggle language",
        colorKey: "C: Open color system",
        spaceKey: "Space: Apply selected color (when color mode is active)",
        notesKey: "Q: Toggle notes mode",
        newGameKey: "Ctrl+N: New game",
        resetKey: "Ctrl+R: Reset board",
        undoKey: "Ctrl+Z: Undo last action",
        redoKey: "Ctrl+Y: Redo last action",
        shiftKey: "Shift: Toggle notes mode",
        touchControls: "Touch/Mouse Controls",
        clickTap: "Click/Tap: Select cell",
        numberPad: "Number Pad: For mobile devices",
        gameFeatures: "Game Features",
        multiDifficulty: "Multiple difficulty levels",
        multiLanguage: "Multi-language support",
        realTimeValidation: "Real-time conflict highlighting",
        colorSystem: "Color system for advanced strategies",
        notesSystem: "Notes system for possible numbers",
        undoRedo: "Undo/Redo functionality",
        hintSystem: "Smart hint system",
        howToPlayContent: {
            keyboard: "Keyboard",
            insertNumbers: "Insert numbers",
            notesMode: "Notes mode",
            toggleNotes: "Toggle notes mode",
            cycleColors: "Cycle through colors",
            applyColor: "Apply selected color",
            undo: "Undo",
            redo: "Redo",
            hint: "Hint",
            delete: "Delete",
            navigate: "Navigate",
            mouseTouch: "Mouse/Touch",
            clickSelect: "Click to select cell",
            clickHighlight: "Click number to highlight",
            mobilePanel: "Mobile: Use bottom panel",
            features: "Features",
            numberCounter: "Number counter (corner)",
            notesSystem: "Notes system",
            colorSystem: "Color system",
            historySystem: "Complete history",
            smartHints: "Smart hints",
            autoHighlight: "Auto highlight"
        }
    },
    pt: {
        mainTitle: "Jogo de Sudoku",
        subtitle: "Desafie sua lógica e divirta-se!",
        difficultyLabel: "Dificuldade:",
        easy: "Fácil",
        medium: "Médio",
        hard: "Difícil",
        expert: "Dificílimo",
        insane: "Dificílimo Mesmo",
        newGame: "Novo Jogo",
        reset: "Limpar",
        hint: "Dica",
        showAnswer: "Resposta",
        winTitle: "Parabéns!",
        winSubtitle: "Você completou o Sudoku!",
        playAgain: "Jogar Novamente",
        confirmTitle: "Mostrar Resposta?",
        confirmSubtitle: "Isso preencherá todo o tabuleiro e encerrará o jogo atual. Você tem certeza?",
        cancel: "Cancelar",
        confirm: "Confirmar",
        langToggle: "EN",
        howToPlay: "Como Jogar",
        keyboardControls: "Controles de Teclado",
        arrowKeys: "Setas: Navegar pelo tabuleiro",
        numbers: "1-9: Inserir números",
        backspace: "Backspace/Delete/0: Apagar números",
        hintKey: "H: Usar dica",
        languageKey: "L: Alternar idioma",
        colorKey: "C: Abrir sistema de cores",
        spaceKey: "Espaço: Aplicar cor selecionada (quando modo cor estiver ativo)",
        notesKey: "Q: Alternar modo de anotações",
        newGameKey: "Ctrl+N: Novo jogo",
        resetKey: "Ctrl+R: Limpar tabuleiro",
        undoKey: "Ctrl+Z: Desfazer última ação",
        redoKey: "Ctrl+Y: Refazer última ação",
        shiftKey: "Shift: Alternar modo de anotações",
        touchControls: "Controles Touch/Mouse",
        clickTap: "Click/Tap: Selecionar célula",
        numberPad: "Painel de Números: Para dispositivos móveis",
        gameFeatures: "Funcionalidades do Jogo",
        multiDifficulty: "Múltiplos níveis de dificuldade",
        multiLanguage: "Suporte a múltiplos idiomas",
        realTimeValidation: "Destaque de conflitos em tempo real",
        colorSystem: "Sistema de cores para estratégias avançadas",
        notesSystem: "Sistema de anotações para números possíveis",
        undoRedo: "Funcionalidade de Desfazer/Refazer",
        hintSystem: "Sistema de dicas inteligentes",
        howToPlayContent: {
            keyboard: "Teclado",
            insertNumbers: "Inserir números",
            notesMode: "Modo anotações",
            toggleNotes: "Alternar modo anotações",
            cycleColors: "Alternar entre cores",
            applyColor: "Aplicar cor selecionada",
            undo: "Desfazer",
            redo: "Refazer",
            hint: "Dica",
            delete: "Apagar",
            navigate: "Navegar",
            mouseTouch: "Mouse/Touch",
            clickSelect: "Clique para selecionar célula",
            clickHighlight: "Clique no número para destacar",
            mobilePanel: "Mobile: Use painel inferior",
            features: "Funcionalidades",
            numberCounter: "Contador de números (canto)",
            notesSystem: "Sistema de anotações",
            colorSystem: "Sistema de cores",
            historySystem: "Histórico completo",
            smartHints: "Dicas inteligentes",
            autoHighlight: "Destaque automático"
        }
    },
    ja: {
        mainTitle: "数独ゲーム　（母ちゃん用）",
        subtitle: "論理に挑戦して楽しんでください！",
        difficultyLabel: "難易度:",
        easy: "簡単",
        medium: "中級",
        hard: "難しい",
        expert: "エキスパート",
        insane: "超難関　【真弓用）",
        newGame: "新しいゲーム",
        reset: "リセット",
        hint: "ヒント",
        showAnswer: "答え",
        winTitle: "おめでとうございます！",
        winSubtitle: "数独をクリアしました！",
        playAgain: "もう一度プレイ",
        confirmTitle: "答えを表示しますか？",
        confirmSubtitle: "これにより、すべてのマスが埋められ、現在のゲームは終了します。よろしいですか？",
        cancel: "キャンセル",
        confirm: "確認",
        langToggle: "PT",
        howToPlay: "遊び方",
        keyboardControls: "キーボード操作",
        arrowKeys: "矢印キー: ボードを移動",
        numbers: "1-9: 数字を入力",
        backspace: "Backspace/Delete/0: 数字を消去",
        hintKey: "H: ヒントを使用",
        languageKey: "L: 言語を切り替え",
        colorKey: "C: カラーシステムを開く",
        spaceKey: "スペース: 選択した色を適用（カラーモードがアクティブな時）",
        notesKey: "Q: メモモードを切り替え",
        newGameKey: "Ctrl+N: 新しいゲーム",
        resetKey: "Ctrl+R: ボードをリセット",
        undoKey: "Ctrl+Z: 最後の操作を元に戻す",
        redoKey: "Ctrl+Y: 最後の操作をやり直す",
        shiftKey: "Shift: メモモードを切り替え",
        touchControls: "タッチ/マウス操作",
        clickTap: "クリック/タップ: セルを選択",
        numberPad: "数字パッド: モバイルデバイス用",
        gameFeatures: "ゲーム機能",
        multiDifficulty: "複数の難易度レベル",
        multiLanguage: "多言語サポート",
        realTimeValidation: "リアルタイム競合ハイライト",
        colorSystem: "高度な戦略のためのカラーシステム",
        notesSystem: "可能な数字のメモシステム",
        undoRedo: "元に戻す/やり直し機能",
        hintSystem: "スマートヒントシステム",
        howToPlayContent: {
            keyboard: "キーボード",
            insertNumbers: "数字を入力",
            notesMode: "メモモード",
            toggleNotes: "メモモード切替",
            cycleColors: "色を切り替え",
            applyColor: "選択した色を適用",
            undo: "元に戻す",
            redo: "やり直し",
            hint: "ヒント",
            delete: "削除",
            navigate: "移動",
            mouseTouch: "マウス/タッチ",
            clickSelect: "クリックでセル選択",
            clickHighlight: "数字をクリックでハイライト",
            mobilePanel: "モバイル：下部パネルを使用",
            features: "機能",
            numberCounter: "数字カウンター（角）",
            notesSystem: "メモシステム",
            colorSystem: "カラーシステム",
            historySystem: "完全な履歴",
            smartHints: "スマートヒント",
            autoHighlight: "自動ハイライト"
        }
    }
};

let currentLang = 'ja'; // Japonês como padrão

/**
 * Atualiza o idioma atual
 * @param {string} lang - Código do idioma (en, pt, ja)
 */
export function setLanguage(lang) {
    if (translations[lang]) {
        currentLang = lang;
        updateUIText();
    }
}

/**
 * Obtém o idioma atual
 * @returns {string} Código do idioma atual
 */
export function getCurrentLanguage() {
    return currentLang;
}

/**
 * Obtém as traduções do idioma atual
 * @returns {object} Objeto com as traduções
 */
export function getCurrentTranslations() {
    return translations[currentLang];
}

/**
 * Atualiza todos os textos da interface
 */
export function updateUIText() {
    // Atualiza a classe do body para controle de fonte
    document.body.className = document.body.className.replace(/lang-\w+/g, '');
    document.body.classList.add(`lang-${currentLang}`);

    const t = translations[currentLang];
    
    // Atualiza elementos principais
    const elements = [
        { id: 'main-title', key: 'mainTitle' },
        { id: 'subtitle', key: 'subtitle' },
        { id: 'difficulty-label', key: 'difficultyLabel' },
        { id: 'new-game-btn', key: 'newGame' },
        { id: 'reset-btn', key: 'reset' },
        { id: 'show-answer-btn', key: 'showAnswer' },
        { id: 'win-title', key: 'winTitle' },
        { id: 'win-subtitle', key: 'winSubtitle' },
        { id: 'modal-new-game-btn', key: 'playAgain' },
        { id: 'confirm-title', key: 'confirmTitle' },
        { id: 'confirm-subtitle', key: 'confirmSubtitle' },
        { id: 'confirm-cancel-btn', key: 'cancel' },
        { id: 'confirm-show-btn', key: 'confirm' },
        { id: 'lang-toggle', key: 'langToggle' },
        { id: 'how-to-play-title', key: 'howToPlay' }
    ];
    
    // Atualiza elementos do "Como Jogar"
    const howToPlayElements = [
        { selector: '[data-translate="keyboard"]', key: 'keyboard' },
        { selector: '[data-translate="insert-numbers"]', key: 'insertNumbers' },
        { selector: '[data-translate="notes-mode"]', key: 'notesMode' },
        { selector: '[data-translate="toggle-notes"]', key: 'toggleNotes' },
        { selector: '[data-translate="cycle-colors"]', key: 'cycleColors' },
        { selector: '[data-translate="apply-color"]', key: 'applyColor' },
        { selector: '[data-translate="undo"]', key: 'undo' },
        { selector: '[data-translate="redo"]', key: 'redo' },
        { selector: '[data-translate="hint"]', key: 'hint' },
        { selector: '[data-translate="delete"]', key: 'delete' },
        { selector: '[data-translate="navigate"]', key: 'navigate' },
        { selector: '[data-translate="mouse-touch"]', key: 'mouseTouch' },
        { selector: '[data-translate="click-select"]', key: 'clickSelect' },
        { selector: '[data-translate="click-highlight"]', key: 'clickHighlight' },
        { selector: '[data-translate="mobile-panel"]', key: 'mobilePanel' },
        { selector: '[data-translate="features"]', key: 'features' },
        { selector: '[data-translate="number-counter"]', key: 'numberCounter' },
        { selector: '[data-translate="notes-system"]', key: 'notesSystem' },
        { selector: '[data-translate="color-system"]', key: 'colorSystem' },
        { selector: '[data-translate="history-system"]', key: 'historySystem' },
        { selector: '[data-translate="smart-hints"]', key: 'smartHints' },
        { selector: '[data-translate="auto-highlight"]', key: 'autoHighlight' }
    ];

    elements.forEach(({ id, key }) => {
        const element = document.getElementById(id);
        if (element && t[key]) {
            element.textContent = t[key];
        }
    });
    
    // Atualiza elementos do "Como Jogar"
    howToPlayElements.forEach(({ selector, key }) => {
        const element = document.querySelector(selector);
        if (element && t.howToPlayContent && t.howToPlayContent[key]) {
            element.textContent = t.howToPlayContent[key];
        }
    });

    // Atualiza botões de dificuldade
    const difficultyButtons = [
        { selector: '[data-difficulty="easy"]', key: 'easy' },
        { selector: '[data-difficulty="medium"]', key: 'medium' },
        { selector: '[data-difficulty="hard"]', key: 'hard' },
        { selector: '[data-difficulty="expert"]', key: 'expert' },
        { selector: '[data-difficulty="insane"]', key: 'insane' }
    ];

    difficultyButtons.forEach(({ selector, key }) => {
        const element = document.querySelector(selector);
        if (element && t[key]) {
            element.textContent = t[key];
        }
    });
}

/**
 * Alterna para o próximo idioma
 */
export function toggleLanguage() {
    if (currentLang === 'ja') currentLang = 'pt';
    else if (currentLang === 'pt') currentLang = 'en';
    else currentLang = 'ja';
    
    updateUIText();
    return currentLang;
}
